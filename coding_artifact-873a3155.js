import{r as h,a as Q,R as I}from"./assets/react-57209f9c.js";import{h as ye,p as ue}from"./assets/diff2html-520d79da.js";import{H as X}from"./assets/hljs-b99628a4.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var pe={exports:{}},z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe=h,be=Symbol.for("react.element"),je=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,Ne=xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function fe(e,o,r){var s,n={},a=null,c=null;r!==void 0&&(a=""+r),o.key!==void 0&&(a=""+o.key),o.ref!==void 0&&(c=o.ref);for(s in o)ve.call(o,s)&&!we.hasOwnProperty(s)&&(n[s]=o[s]);if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:be,type:e,key:a,ref:c,props:n,_owner:Ne.current}}z.Fragment=je;z.jsx=fe;z.jsxs=fe;pe.exports=z;var t=pe.exports,ee={},re=Q;ee.createRoot=re.createRoot,ee.hydrateRoot=re.hydrateRoot;const Se="_container_1kx9n_2",$e="_uploadZone_1kx9n_10",ae={container:Se,uploadZone:$e},ke=({onFilesDrop:e,children:o})=>{const r=c=>{c.preventDefault(),c.currentTarget.style.borderColor="#0969da"},s=c=>{c.currentTarget.style.borderColor="#30363d"},n=c=>{c.preventDefault(),c.currentTarget.style.borderColor="#30363d",e(c.dataTransfer.files)},a=c=>{e(c.target.files),c.target.value=""};return t.jsxs("div",{className:ae.container,children:[t.jsxs("div",{className:ae.uploadZone,onDragOver:r,onDragLeave:s,onDrop:n,onClick:()=>document.getElementById("fileInput").click(),children:[t.jsx("p",{children:"Drag and drop your source code files here or click to select"}),t.jsx("input",{type:"file",id:"fileInput",style:{display:"none"},multiple:!0,onChange:a})]}),o]})},Fe="_button_nc3y6_2",De="_small_nc3y6_15",Le="_medium_nc3y6_22",Re="_large_nc3y6_29",Be="_primary_nc3y6_47",Oe="_success_nc3y6_56",Ee="_danger_nc3y6_65",Ie="_ghost_nc3y6_75",Z={button:Fe,small:De,medium:Le,large:Re,default:"_default_nc3y6_37",primary:Be,success:Oe,danger:Ee,ghost:Ie},te=({variant:e="default",size:o="medium",disabled:r=!1,type:s="button",onClick:n,children:a,className:c,..._})=>{const m=[Z.button,Z[e],Z[o],c].filter(Boolean).join(" ");return t.jsx("button",{type:s,className:m,onClick:n,disabled:r,..._,children:a})},Ae="_buttonWrapper_17g1b_1",Pe={buttonWrapper:Ae},he=h.createContext(),T="~~~",He=({initialComments:e,children:o})=>{const[r,s]=h.useState(e),[n,a]=h.useState(),c=(i,d,u)=>{const f=`${i}${T}${d}`,b={id:Date.now(),content:u};s(S=>({...S,[f]:[...S[f]||[],b]}))},_=i=>{const d={id:Date.now(),content:i};a(d)},m=()=>(n==null?void 0:n.content)||"",p=(i,d,u,f)=>{const b=`${i}${T}${d}`;s(S=>({...S,[b]:S[b].map((v,W)=>W===u?{...v,content:f}:v)}))},l=(i,d,u)=>{const f=`${i}${T}${d}`;s(b=>({...b,[f]:b[f].filter((S,v)=>v!==u)}))},g=(i,d)=>{const u=`${i}-${d}`;return r[u]||[]},y=h.useCallback(()=>{const i=Object.entries(r).map(([d,u])=>{const[f,b]=d.split(T);return{fileName:f,lineInfo:b,comments:u}});return n!=null&&n.content?[...i,{fileName:"global",lineInfo:"global",comments:[n]}]:i},[r,n]),w=h.useCallback(i=>Object.entries(r).filter(([u])=>u.startsWith(`${i}${T}`)).map(([u,f])=>({lineInfo:u.split(T)[1],comments:f})),[r]);return t.jsx(he.Provider,{value:{addComment:c,deleteComment:l,updateComment:p,getComments:g,getAllComments:y,addGlobalComment:_,getGlobalComment:m,getAllCommentsForFile:w},children:o})},G=()=>h.useContext(he),me=JSON.parse(document.getElementById("config-json-data").textContent),Te=()=>{window.scrollTo({top:0,behavior:"smooth"})},Me=({uploadedFiles:e,onSubmit:o,children:r,...s})=>{const{getAllComments:n}=G(),a=n(),c=!!Object.keys(e).length,_=!!a.length,m=async()=>{let l=`@${me.botName} /update`,g=JSON.stringify({files:e,comments:a}),y=`${l}
~~~
${g}`;c&&!_&&(l=`@${me.botName} /set`,g=JSON.stringify({files:e}),y=`${l}
~~~
${g}`),console.log("Message",y),Te(),window.Poe&&await window.Poe.sendUserMessage(y)},p=!c&&!_;return t.jsx("div",{className:Pe.buttonWrapper,children:t.jsx(te,{onClick:m,disabled:!!p,variant:"success",...s,children:r})})};const We="_diffContainer_vza99_1",qe="_fileContent_vza99_3",Je="_addCommentButton_vza99_23",ze="_commentRow_vza99_46",Ge="_commentCell_vza99_50",F={diffContainer:We,fileContent:qe,"d2h-code-side-emptyplaceholder":"_d2h-code-side-emptyplaceholder_vza99_13","d2h-info":"_d2h-info_vza99_13",addCommentButton:Je,commentRow:ze,commentCell:Ge},Ue="_container_1jkch_2",Ke="_header_1jkch_14",Ze="_buttonGroup_1jkch_25",Ve="_content_1jkch_31",Ye="_noHeader_1jkch_36",M={container:Ue,header:Ke,buttonGroup:Ze,content:Ve,noHeader:Ye},U=({header:e,buttons:o,children:r})=>t.jsxs("div",{className:M.container,children:[e&&t.jsxs("div",{className:M.header,children:[e,t.jsx("div",{className:M.buttonGroup,children:o})]}),t.jsx("div",{className:`${M.content} ${e?"":M.noHeader}`,children:r})]}),_e=({content:e,onCopySuccess:o,onCopyError:r,defaultLabel:s="Copy",successLabel:n="Copied!",children:a=s,...c})=>{const[_,m]=h.useState(!1),p=async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const l=document.createElement("textarea");l.value=e,l.style.top="0",l.style.left="0",l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.focus(),l.select(),document.execCommand("copy"),document.body.removeChild(l)}m(!0),o==null||o(),setTimeout(()=>m(!1),2e3)}catch(l){r==null||r(l)}};return t.jsx(te,{onClick:p,...c,children:_?n:a})},Qe="_commentSection_1sd2d_1",Xe="_stickyComment_1sd2d_12",et="_commentSectionHeader_1sd2d_22",tt="_comment_1sd2d_1",nt="_commentList_1sd2d_38",ot="_commentWrapper_1sd2d_44",st="_deleteComment_1sd2d_50",ct="_formHeader_1sd2d_63",rt="_commentContent_1sd2d_68",at="_commentForm_1sd2d_76",mt="_commentInput_1sd2d_84",lt="_formFooter_1sd2d_95",it="_submitComment_1sd2d_99",dt="_closeButton_1sd2d_111",R={commentSection:Qe,stickyComment:Xe,commentSectionHeader:et,comment:tt,commentList:nt,commentWrapper:ot,deleteComment:st,formHeader:ct,commentContent:rt,commentForm:at,commentInput:mt,formFooter:lt,submitComment:it,closeButton:dt},ut=({content:e,onDelete:o})=>t.jsx("div",{className:R.comment,children:t.jsxs("div",{className:R.commentWrapper,children:[t.jsx("div",{className:R.commentContent,children:e}),t.jsx("button",{className:R.deleteComment,onClick:o,children:"×"})]})}),pt=({onSubmit:e})=>{const[o,r]=h.useState(""),s=n=>{n.preventDefault(),o.trim()&&(e(o),r(""))};return t.jsxs("form",{className:R.commentForm,onSubmit:s,children:[t.jsx("textarea",{value:o,onChange:n=>r(n.target.value),placeholder:"Add a comment...",className:R.commentInput}),t.jsx("div",{className:R.formFooter,children:t.jsx("button",{onClick:s,className:R.submitComment,children:"Comment"})})]})},Ce=({lineNumber:e,comments:o,onAddComment:r,onDeleteComment:s,onClose:n})=>t.jsx(pt,{onSubmit:r}),ge=({comments:e,onDeleteComment:o})=>e.length?t.jsx("div",{className:R.commentList,children:e.map((r,s)=>t.jsx(ut,{...r,onDelete:()=>o(s)},s))}):null,ft={drawFileList:!1,matching:"lines",outputFormat:"line-by-line",highlight:!1,colorScheme:"dark",renderNothingWhenEmpty:!0,rawTemplates:{"generic-wrapper":'<div class="d2h-auto-color-scheme">{{{content}}}</div>',"line-by-line-file-diff":`
            <div id="{{fileHtmlId}}" data-lang="{{file.language}}">
                <div class="d2h-file-list-wrapper">
                    <div class="d2h-file-list-header">
                        <span class="d2h-file-name-wrapper">
                            <span class="d2h-file-name">{{file.fileName}}</span>
                        </span>
                    </div>
                </div>
                <div class="d2h-file-diff">
                    <div class="d2h-code-wrapper">
                        <table class="d2h-diff-table">
                            <tbody class="d2h-diff-tbody">
                                {{{diffs}}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>`}},ht=I.memo(({file:e,fileContent:o,commentsEnabled:r=!0})=>{const s=I.useRef(null),[n,a]=h.useState(null),c=I.useRef(null),[_,m]=h.useState([]),{addComment:p,deleteComment:l,getComments:g,getAllCommentsForFile:y}=G(),w=h.useMemo(()=>({__html:ye([e],ft)}),[e]),i=h.useCallback(()=>{if(!s.current)return;(()=>{s.current.querySelectorAll(`.${F.commentRow}`).forEach(x=>{x!==c.current&&x.remove()})})();const K=y(e.newName).reduce((C,{lineInfo:x,comments:B})=>(C[x]=B,C),{}),P=[],$={};s.current.querySelectorAll(".d2h-code-linenumber").forEach(C=>{var O,k,j,E,N,A;const x=(j=(k=(O=C.querySelector(".line-num1"))==null?void 0:O.textContent)==null?void 0:k.trim)==null?void 0:j.call(k),H=((A=(N=(E=C.querySelector(".line-num2"))==null?void 0:E.textContent)==null?void 0:N.trim)==null?void 0:A.call(N))||x;$[H]||($[H]=[]),$[H].push(C)}),Object.entries($).forEach(([C,x])=>{const B=K[C];if(!(B!=null&&B.length))return;const O=(x[1]?x[1]:x[0]).closest("tr");if(!O)return;const k=O.closest("tbody");if(!k)return;const j=document.createElement("tr");j.className=`${F.commentRow}`,j.setAttribute("data-line",C);const E=document.createElement("div");E.className="portal-container";const N=document.createElement("td");N.className=`${F.commentCell}`,N.colSpan=3,N.appendChild(E),j.appendChild(N),O.nextSibling?k.insertBefore(j,O.nextSibling):k.appendChild(j),P.push(t.jsx(I.Fragment,{children:Q.createPortal(t.jsx(ge,{comments:B,onDeleteComment:A=>l(e.newName,C,A)}),E)},`${e.newName}-${C}`))}),m(P)},[e.newName,y,l]);I.useEffect(()=>{setTimeout(async()=>{var v;if(s.current){const W=s.current.querySelectorAll(".d2h-code-linenumber"),K=((v=e.newName)==null?void 0:v.split(".").pop())||"";W.forEach($=>{const C=$.closest("tr");if(!C.classList.contains("d2h-del")&&r){const x=document.createElement("button");x.className=F.addCommentButton,x.innerHTML="+",C.appendChild(x),C.addEventListener("mouseenter",()=>{x.style.opacity="1"}),C.addEventListener("mouseleave",()=>{x.style.opacity="0"}),x.addEventListener("click",B=>{var A,q,ne,oe,J,se;const H=(ne=(q=(A=$.querySelector(".line-num1"))==null?void 0:A.textContent)==null?void 0:q.trim)==null?void 0:ne.call(q),k=((se=(J=(oe=$.querySelector(".line-num2"))==null?void 0:oe.textContent)==null?void 0:J.trim)==null?void 0:se.call(J))||H;if(n===k)return;c.current&&(c.current.remove(),c.current=null),a(k);const j=document.createElement("tr");j.className=F.commentRow,j.innerHTML=`<td colspan="3" class="${F.commentCell}"></td>`;const E=`.${F.commentRow}[data-line="${k}"]`,N=Array.from(s.current.querySelectorAll(E));if(N.length>0){const ce=N[N.length-1];ce.parentNode.insertBefore(j,ce.nextSibling)}else C.parentNode.insertBefore(j,C.nextSibling);c.current=j})}});const P=s.current.querySelectorAll(".d2h-code-line-ctn");P==null||P.forEach($=>{$.dataset.highlighted||(X.configure({ignoreUnescapedHTML:!0}),$.classList.add(`language-${K}`),X.highlightElement($))})}},0)},[w,e.newName,r,n]),I.useEffect(()=>{i()},[i]);const d=v=>{n&&(p(e.newName,n,v),i())},u=v=>{l(e.newName,n,v),i()},f=()=>{c.current&&(c.current.remove(),c.current=null),a(null)},b=e.isNew?e.newName:e.oldName,S=e.isRename?`${e.oldName} -> ${e.newName}`:b;return t.jsx(U,{header:S,buttons:t.jsx(_e,{size:"small",content:o}),children:t.jsxs("div",{className:F.diffContainer,children:[t.jsx("div",{className:F.fileContent,ref:s,dangerouslySetInnerHTML:w}),_,r&&n&&c.current&&Q.createPortal(t.jsx(Ce,{lineNumber:n,comments:g(e.newName,n),onAddComment:d,onDeleteComment:u,onClose:f}),c.current.querySelector(`.${F.commentCell}`))]})})}),_t=({diff:e,files:o,commentsEnabled:r=!0})=>h.useMemo(()=>ue(e),[e]).map(n=>t.jsx(ht,{file:n,fileContent:o[n.newName],commentsEnabled:r},n.newName));const Ct="_container_1mk1f_1",gt="_codeWrapper_1mk1f_7",yt="_inlineCommentSection_1mk1f_16",xt="_codeLine_1mk1f_21",bt="_lineNumber_1mk1f_35",jt="_hoverable_1mk1f_48",vt="_lineContent_1mk1f_57",Nt="_addCommentButton_1mk1f_61",L={container:Ct,codeWrapper:gt,inlineCommentSection:yt,codeLine:xt,lineNumber:bt,hoverable:jt,lineContent:vt,addCommentButton:Nt},wt=JSON.parse(document.getElementById("config-json-data").textContent),St=({content:e,filename:o,children:r="Deploy",...s})=>{const n=async()=>{let a=`@${wt.botName} /deploy`,c=JSON.stringify({filename:o}),_=`${a}
~~~
${c}`;console.log("Message",_),window.Poe&&await window.Poe.sendUserMessage(_)};return o.endsWith(".html")?t.jsx(te,{onClick:n,...s,children:"Deploy"}):null},$t=e=>{const o=e.split(".").pop().toLowerCase();return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",rb:"ruby",java:"java",cpp:"cpp",c:"c",cs:"csharp",html:"html",css:"css",scss:"scss",sass:"scss",php:"php",go:"go",rs:"rust",swift:"swift",kt:"kotlin",md:"markdown",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",sql:"sql",sh:"bash",bash:"bash",dockerfile:"dockerfile"}[o]||"plaintext"},kt=({lineNumber:e,content:o,commentsEnabled:r,onLineSelect:s,language:n,selectedLine:a,existingComments:c,onAddComment:_,onDeleteComment:m,onClose:p})=>{const[l,g]=h.useState(!1),y=h.useRef(null);return h.useEffect(()=>{!y.current||y.current.dataset.highlighted==="yes"||X.highlightElement(y.current)},[o]),t.jsxs("div",{className:L.lineContainer,children:[t.jsxs("div",{className:L.codeLine,"data-line":e,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onClick:()=>s(e),children:[t.jsx("span",{className:`${L.lineNumber}${r?" "+L.hoverable:""}`,children:String(e).padStart(3)}),t.jsx("span",{ref:y,className:`${L.lineContent} language-${n}`,children:o}),r&&t.jsx("button",{className:L.addCommentButton,style:{opacity:l?1:0},onClick:w=>{w.stopPropagation(),s(e)},children:"+"})]}),c&&c.length>0&&t.jsx("div",{className:L.existingComments,children:t.jsx(ge,{comments:c,onDeleteComment:w=>m(w)})}),a===e&&r&&t.jsx(Ce,{lineNumber:e,comments:c||[],onAddComment:_,onDeleteComment:m,onClose:p})]})},le=({filename:e,content:o,commentsEnabled:r=!0})=>{const[s,n]=h.useState(null),{addComment:a,deleteComment:c,getAllCommentsForFile:_}=G(),m=$t(e),p=o.split(`
`),l=t.jsxs(t.Fragment,{children:[t.jsx(St,{size:"small",filename:e}),t.jsx(_e,{size:"small",content:o})]}),y=_(e).reduce((d,{lineInfo:u,comments:f})=>(d[u]=f,d),{}),w=(d,u)=>{a(e,d,u)},i=(d,u)=>{c(e,d,u)};return t.jsx(U,{header:e,buttons:l,children:t.jsx("div",{className:L.container,children:t.jsx("pre",{className:L.codeWrapper,children:t.jsx("code",{className:`language-${m}`,children:p.map((d,u)=>{const f=u+1,b=y[f]||[];return t.jsx(kt,{lineNumber:f,content:d,commentsEnabled:r,onLineSelect:n,language:m,selectedLine:s,existingComments:b,onAddComment:S=>w(f,S),onDeleteComment:S=>i(f,S),onClose:()=>n(null)},f)})})})})})},Ft="_container_7qw4f_2",Dt={container:Ft},Lt="_diffDescription_guii0_2",Rt={diffDescription:Lt},ie=({description:e})=>e?t.jsx(U,{children:t.jsx("div",{className:Rt.diffDescription,children:e})}):null;function Bt(e){return e?ue(e).map(o=>o.newName):[]}const Ot="_container_r5p9y_1",Et="_commentForm_r5p9y_7",It="_commentInput_r5p9y_11",V={container:Ot,commentForm:Et,commentInput:It},At=()=>{const{addGlobalComment:e,getGlobalComment:o}=G(),[r,s]=h.useState(o()),n=a=>{const c=a.target.value;s(c),e(c)};return t.jsx(U,{header:"Comment",children:t.jsx("div",{className:V.container,children:t.jsx("div",{className:V.commentForm,children:t.jsx("textarea",{value:r,onChange:n,placeholder:"What would you like to do?",className:V.commentInput})})})})},D=JSON.parse(document.getElementById("config-json-data").textContent),Y=JSON.parse(document.getElementById("files-json-data").textContent),de=JSON.parse(document.getElementById("diff-json-data").textContent),Pt=JSON.parse(document.getElementById("comments-json-data").textContent),Ht=()=>{const[e,o]=h.useState({}),r=Bt(de),s=Object.keys(Y).reduce((m,p)=>(r.includes(p)||(m[p]=Y[p]),m),{}),n=async m=>{try{const p=g=>new Promise((y,w)=>{const i=new FileReader;i.onload=()=>y(i.result),i.onerror=w,i.readAsText(g)}),l=await Promise.all(Array.from(m).map(async g=>[g.name,await p(g)]));o(g=>({...g,...Object.fromEntries(l)}))}catch(p){console.error("Error reading files:",p)}},a=async()=>{const m=JSON.stringify({files:e}),l=`${`@${D.botName} /set`}
~~~
${m}`;console.log("Message:",l),window.Poe&&await window.Poe.sendUserMessage(l)};I.useEffect(()=>{D.shouldAutoSubmitUpload&&Object.keys(e).length>0&&a()},[e]);const c=m=>{o(p=>{const l={...p};return delete l[m],l})},_=()=>t.jsxs(t.Fragment,{children:[t.jsxs("h1",{children:["🚀 ",D.botName]}),t.jsx("p",{children:"🤯 Tired of AI bots playing hide-and-seek with your code?"}),t.jsx("p",{children:'Finally! A way to get AI code assistant without the endless "..." or "code continues here" nonsense. Just upload, ask, and get the job done. Simple as that! ⚡️'})]});return t.jsx(He,{initialComments:Pt,children:t.jsxs("div",{className:Dt.container,children:[D.isInitialPage&&t.jsx(ie,{description:t.jsx(_,{})}),t.jsx(ie,{description:D.description}),D.shouldShowUpload&&t.jsx(ke,{onFilesDrop:n}),t.jsx(_t,{diff:de,files:Y,commentsEnabled:D.shouldShowComments}),Object.keys(s).map(m=>t.jsx(le,{filename:m,content:s[m],commentsEnabled:D.shouldShowComments},m)),Object.keys(e).map(m=>t.jsx(le,{filename:m,content:e[m],onRemove:()=>c(m),commentsEnabled:D.shouldShowComments},m)),D.shouldShowComments&&t.jsx(At,{}),t.jsx(Me,{uploadedFiles:e,size:"large",children:"Send message"})]})})};ee.createRoot(document.getElementById("root")).render(t.jsx(I.StrictMode,{children:t.jsx(Ht,{})}));
