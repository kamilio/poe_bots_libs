var F;(function(i){i.INSERT="insert",i.DELETE="delete",i.CONTEXT="context"})(F||(F={}));const $e={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"},ke={LINES:"lines",WORDS:"words",NONE:"none"},je={WORD:"word",CHAR:"char"};var Z;(function(i){i.AUTO="auto",i.DARK="dark",i.LIGHT="light"})(Z||(Z={}));const Ge=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],Ue=RegExp("["+Ge.join("\\")+"]","g");function Ve(i){return i.replace(Ue,"\\$&")}function xe(i){return i&&i.replace(/\\/g,"/")}function _e(i){let t,n,e,s=0;for(t=0,e=i.length;t<e;t++)n=i.charCodeAt(t),s=(s<<5)-s+n,s|=0;return s}function Ee(i,t){const n=i.split(".");return n.length>1?n[n.length-1]:t}function Ce(i,t){return t.reduce((n,e)=>n||i.startsWith(e),!1)}const Le=["a/","b/","i/","w/","c/","o/"];function q(i,t,n){const e=n!==void 0?[...Le,n]:Le,s=t?new RegExp(`^${Ve(t)} "?(.+?)"?$`):new RegExp('^"?(.+?)"?$'),[,a=""]=s.exec(i)||[],r=e.find(c=>a.indexOf(c)===0);return(r?a.slice(r.length):a).replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function Xe(i,t){return q(i,"---",t)}function qe(i,t){return q(i,"+++",t)}function Me(i,t={}){const n=[];let e=null,s=null,a=null,r=null,f=null,c=null,d=null;const w="--- ",T="+++ ",E="@@",o=/^old mode (\d{6})/,u=/^new mode (\d{6})/,b=/^deleted file mode (\d{6})/,p=/^new file mode (\d{6})/,y=/^copy from "?(.+)"?/,S=/^copy to "?(.+)"?/,N=/^rename from "?(.+)"?/,O=/^rename to "?(.+)"?/,C=/^similarity index (\d+)%/,D=/^dissimilarity index (\d+)%/,ae=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,l=/^Binary files (.*) and (.*) differ/,h=/^GIT binary patch/,m=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,x=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,A=/^new file mode (\d{6})/,z=/^deleted file mode (\d{6}),(\d{6})/,R=i.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function I(){s!==null&&e!==null&&(e.blocks.push(s),s=null)}function X(){e!==null&&(!e.oldName&&c!==null&&(e.oldName=c),!e.newName&&d!==null&&(e.newName=d),e.newName&&(n.push(e),e=null)),c=null,d=null}function J(){I(),X(),e={blocks:[],deletedLines:0,addedLines:0}}function P(g){I();let L;e!==null&&((L=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(g))?(e.isCombined=!1,a=parseInt(L[1],10),f=parseInt(L[2],10)):(L=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(g))?(e.isCombined=!0,a=parseInt(L[1],10),r=parseInt(L[2],10),f=parseInt(L[3],10)):(g.startsWith(E)&&console.error("Failed to parse lines, starting in 0!"),a=0,f=0,e.isCombined=!1)),s={lines:[],oldStartLine:a,oldStartLine2:r,newStartLine:f,header:g}}function B(g){if(e===null||s===null||a===null||f===null)return;const L={content:g},v=e.isCombined?["+ "," +","++"]:["+"],$=e.isCombined?["- "," -","--"]:["-"];Ce(g,v)?(e.addedLines++,L.type=F.INSERT,L.oldNumber=void 0,L.newNumber=f++):Ce(g,$)?(e.deletedLines++,L.type=F.DELETE,L.oldNumber=a++,L.newNumber=void 0):(L.type=F.CONTEXT,L.oldNumber=a++,L.newNumber=f++),s.lines.push(L)}function K(g,L){let v=L;for(;v<R.length-3;){if(g.startsWith("diff"))return!1;if(R[v].startsWith(w)&&R[v+1].startsWith(T)&&R[v+2].startsWith(E))return!0;v++}return!1}return R.forEach((g,L)=>{if(!g||g.startsWith("*"))return;let v;const $=R[L-1],te=R[L+1],ue=R[L+2];if(g.startsWith("diff --git")||g.startsWith("diff --combined")){if(J(),(v=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/.exec(g))&&(c=q(v[1],void 0,t.dstPrefix),d=q(v[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isGitDiff=!0;return}if(g.startsWith("Binary files")&&!(e!=null&&e.isGitDiff)){if(J(),(v=/^Binary files "?([a-ciow]\/.+)"? and "?([a-ciow]\/.+)"? differ/.exec(g))&&(c=q(v[1],void 0,t.dstPrefix),d=q(v[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isBinary=!0;return}if((!e||!e.isGitDiff&&e&&g.startsWith(w)&&te.startsWith(T)&&ue.startsWith(E))&&J(),e!=null&&e.isTooBig)return;if(e&&(typeof t.diffMaxChanges=="number"&&e.addedLines+e.deletedLines>t.diffMaxChanges||typeof t.diffMaxLineLength=="number"&&g.length>t.diffMaxLineLength)){e.isTooBig=!0,e.addedLines=0,e.deletedLines=0,e.blocks=[],s=null;const ne=typeof t.diffTooBigMessage=="function"?t.diffTooBigMessage(n.length):"Diff too big to be displayed";P(ne);return}if(g.startsWith(w)&&te.startsWith(T)||g.startsWith(T)&&$.startsWith(w)){if(e&&!e.oldName&&g.startsWith("--- ")&&(v=Xe(g,t.srcPrefix))){e.oldName=v,e.language=Ee(e.oldName,e.language);return}if(e&&!e.newName&&g.startsWith("+++ ")&&(v=qe(g,t.dstPrefix))){e.newName=v,e.language=Ee(e.newName,e.language);return}}if(e&&(g.startsWith(E)||e.isGitDiff&&e.oldName&&e.newName&&!s)){P(g);return}if(s&&(g.startsWith("+")||g.startsWith("-")||g.startsWith(" "))){B(g);return}const Y=!K(g,L);if(e===null)throw new Error("Where is my file !!!");(v=o.exec(g))?e.oldMode=v[1]:(v=u.exec(g))?e.newMode=v[1]:(v=b.exec(g))?(e.deletedFileMode=v[1],e.isDeleted=!0):(v=p.exec(g))?(e.newFileMode=v[1],e.isNew=!0):(v=y.exec(g))?(Y&&(e.oldName=v[1]),e.isCopy=!0):(v=S.exec(g))?(Y&&(e.newName=v[1]),e.isCopy=!0):(v=N.exec(g))?(Y&&(e.oldName=v[1]),e.isRename=!0):(v=O.exec(g))?(Y&&(e.newName=v[1]),e.isRename=!0):(v=l.exec(g))?(e.isBinary=!0,e.oldName=q(v[1],void 0,t.srcPrefix),e.newName=q(v[2],void 0,t.dstPrefix),P("Binary file")):h.test(g)?(e.isBinary=!0,P(g)):(v=C.exec(g))?e.unchangedPercentage=parseInt(v[1],10):(v=D.exec(g))?e.changedPercentage=parseInt(v[1],10):(v=ae.exec(g))?(e.checksumBefore=v[1],e.checksumAfter=v[2],v[3]&&(e.mode=v[3])):(v=m.exec(g))?(e.checksumBefore=[v[2],v[3]],e.checksumAfter=v[1]):(v=x.exec(g))?(e.oldMode=[v[2],v[3]],e.newMode=v[1]):(v=A.exec(g))?(e.newFileMode=v[1],e.isNew=!0):(v=z.exec(g))&&(e.deletedFileMode=v[1],e.isDeleted=!0)}),I(),X(),n}function _(){}_.prototype={diff:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=e.callback;typeof e=="function"&&(s=e,e={}),this.options=e;var a=this;function r(b){return s?(setTimeout(function(){s(void 0,b)},0),!0):b}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var f=n.length,c=t.length,d=1,w=f+c;e.maxEditLength&&(w=Math.min(w,e.maxEditLength));var T=[{newPos:-1,components:[]}],E=this.extractCommon(T[0],n,t,0);if(T[0].newPos+1>=f&&E+1>=c)return r([{value:this.join(n),count:n.length}]);function o(){for(var b=-1*d;b<=d;b+=2){var p=void 0,y=T[b-1],S=T[b+1],N=(S?S.newPos:0)-b;y&&(T[b-1]=void 0);var O=y&&y.newPos+1<f,C=S&&0<=N&&N<c;if(!O&&!C){T[b]=void 0;continue}if(!O||C&&y.newPos<S.newPos?(p=Ke(S),a.pushComponent(p.components,void 0,!0)):(p=y,p.newPos++,a.pushComponent(p.components,!0,void 0)),N=a.extractCommon(p,n,t,b),p.newPos+1>=f&&N+1>=c)return r(Je(a,p.components,n,t,a.useLongestToken));T[b]=p}d++}if(s)(function b(){setTimeout(function(){if(d>w)return s();o()||b()},0)})();else for(;d<=w;){var u=o();if(u)return u}},pushComponent:function(t,n,e){var s=t[t.length-1];s&&s.added===n&&s.removed===e?t[t.length-1]={count:s.count+1,added:n,removed:e}:t.push({count:1,added:n,removed:e})},extractCommon:function(t,n,e,s){for(var a=n.length,r=e.length,f=t.newPos,c=f-s,d=0;f+1<a&&c+1<r&&this.equals(n[f+1],e[c+1]);)f++,c++,d++;return d&&t.components.push({count:d}),t.newPos=f,c},equals:function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],e=0;e<t.length;e++)t[e]&&n.push(t[e]);return n},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Je(i,t,n,e,s){for(var a=0,r=t.length,f=0,c=0;a<r;a++){var d=t[a];if(d.removed){if(d.value=i.join(e.slice(c,c+d.count)),c+=d.count,a&&t[a-1].added){var T=t[a-1];t[a-1]=t[a],t[a]=T}}else{if(!d.added&&s){var w=n.slice(f,f+d.count);w=w.map(function(o,u){var b=e[c+u];return b.length>o.length?b:o}),d.value=i.join(w)}else d.value=i.join(n.slice(f,f+d.count));f+=d.count,d.added||(c+=d.count)}}var E=t[r-1];return r>1&&typeof E.value=="string"&&(E.added||E.removed)&&i.equals("",E.value)&&(t[r-2].value+=E.value,t.pop()),t}function Ke(i){return{newPos:i.newPos,components:i.components.slice(0)}}var Ye=new _;function Qe(i,t,n){return Ye.diff(i,t,n)}var Se=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Ie=/\S/,me=new _;me.equals=function(i,t){return this.options.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i===t||this.options.ignoreWhitespace&&!Ie.test(i)&&!Ie.test(t)};me.tokenize=function(i){for(var t=i.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&Se.test(t[n])&&Se.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function Ze(i,t,n){return me.diff(i,t,n)}var Fe=new _;Fe.tokenize=function(i){var t=[],n=i.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var e=0;e<n.length;e++){var s=n[e];e%2&&!this.options.newlineIsToken?t[t.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),t.push(s))}return t};var et=new _;et.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};var tt=new _;tt.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};function le(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?le=function(t){return typeof t}:le=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(i)}var nt=Object.prototype.toString,re=new _;re.useLongestToken=!0;re.tokenize=Fe.tokenize;re.castInput=function(i){var t=this.options,n=t.undefinedReplacement,e=t.stringifyReplacer,s=e===void 0?function(a,r){return typeof r>"u"?n:r}:e;return typeof i=="string"?i:JSON.stringify(be(i,null,null,s),s,"  ")};re.equals=function(i,t){return _.prototype.equals.call(re,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function be(i,t,n,e,s){t=t||[],n=n||[],e&&(i=e(s,i));var a;for(a=0;a<t.length;a+=1)if(t[a]===i)return n[a];var r;if(nt.call(i)==="[object Array]"){for(t.push(i),r=new Array(i.length),n.push(r),a=0;a<i.length;a+=1)r[a]=be(i[a],t,n,e,s);return t.pop(),n.pop(),r}if(i&&i.toJSON&&(i=i.toJSON()),le(i)==="object"&&i!==null){t.push(i),r={},n.push(r);var f=[],c;for(c in i)i.hasOwnProperty(c)&&f.push(c);for(f.sort(),a=0;a<f.length;a+=1)c=f[a],r[c]=be(i[c],t,n,e,c);t.pop(),n.pop()}else r=i;return r}var ge=new _;ge.tokenize=function(i){return i.slice()};ge.join=ge.removeEmpty=function(i){return i};function it(i,t){if(i.length===0)return t.length;if(t.length===0)return i.length;const n=[];let e;for(e=0;e<=t.length;e++)n[e]=[e];let s;for(s=0;s<=i.length;s++)n[0][s]=s;for(e=1;e<=t.length;e++)for(s=1;s<=i.length;s++)t.charAt(e-1)===i.charAt(s-1)?n[e][s]=n[e-1][s-1]:n[e][s]=Math.min(n[e-1][s-1]+1,Math.min(n[e][s-1]+1,n[e-1][s]+1));return n[t.length][i.length]}function ve(i){return(t,n)=>{const e=i(t).trim(),s=i(n).trim();return it(e,s)/(e.length+s.length)}}function we(i){function t(e,s,a=new Map){let r=1/0,f;for(let c=0;c<e.length;++c)for(let d=0;d<s.length;++d){const w=JSON.stringify([e[c],s[d]]);let T;a.has(w)&&(T=a.get(w))||(T=i(e[c],s[d]),a.set(w,T)),T<r&&(r=T,f={indexA:c,indexB:d,score:r})}return f}function n(e,s,a=0,r=new Map){const f=t(e,s,r);if(!f||e.length+s.length<3)return[[e,s]];const c=e.slice(0,f.indexA),d=s.slice(0,f.indexB),w=[e[f.indexA]],T=[s[f.indexB]],E=f.indexA+1,o=f.indexB+1,u=e.slice(E),b=s.slice(o),p=n(c,d,a+1,r),y=n(w,T,a+1,r),S=n(u,b,a+1,r);let N=y;return(f.indexA>0||f.indexB>0)&&(N=p.concat(N)),(e.length>E||s.length>o)&&(N=N.concat(S)),N}return n}const W={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},ce={matching:ke.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:je.WORD,colorScheme:Z.LIGHT},j="/",He=ve(i=>i.value),st=we(He);function pe(i){return i.indexOf("dev/null")!==-1}function rt(i){return i.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function at(i){return i.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function oe(i){switch(i){case F.CONTEXT:return W.CONTEXT;case F.INSERT:return W.INSERTS;case F.DELETE:return W.DELETES}}function ye(i){switch(i){case Z.DARK:return"d2h-dark-color-scheme";case Z.AUTO:return"d2h-auto-color-scheme";case Z.LIGHT:default:return"d2h-light-color-scheme"}}function lt(i){return i?2:1}function ee(i){return i.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function G(i,t,n=!0){const e=lt(t);return{prefix:i.substring(0,e),content:n?ee(i.substring(e)):i.substring(e)}}function de(i){const t=xe(i.oldName),n=xe(i.newName);if(t!==n&&!pe(t)&&!pe(n)){const e=[],s=[],a=t.split(j),r=n.split(j),f=a.length,c=r.length;let d=0,w=f-1,T=c-1;for(;d<w&&d<T&&a[d]===r[d];)e.push(r[d]),d+=1;for(;w>d&&T>d&&a[w]===r[T];)s.unshift(r[T]),w-=1,T-=1;const E=e.join(j),o=s.join(j),u=a.slice(d,w+1).join(j),b=r.slice(d,T+1).join(j);return E.length&&o.length?E+j+"{"+u+" → "+b+"}"+j+o:E.length?E+j+"{"+u+" → "+b+"}":o.length?"{"+u+" → "+b+"}"+j+o:t+" → "+n}else return pe(n)?t:n}function Te(i){return`d2h-${_e(de(i)).toString().slice(-6)}`}function Ne(i){let t="file-changed";return i.isRename||i.isCopy?t="file-renamed":i.isNew?t="file-added":i.isDeleted?t="file-deleted":i.newName!==i.oldName&&(t="file-renamed"),t}function Ae(i,t,n,e={}){const{matching:s,maxLineLengthHighlight:a,matchWordsThreshold:r,diffStyle:f}=Object.assign(Object.assign({},ce),e),c=G(i,n,!1),d=G(t,n,!1);if(c.content.length>a||d.content.length>a)return{oldLine:{prefix:c.prefix,content:ee(c.content)},newLine:{prefix:d.prefix,content:ee(d.content)}};const w=f==="char"?Qe(c.content,d.content):Ze(c.content,d.content),T=[];if(f==="word"&&s==="words"){const o=w.filter(p=>p.removed),u=w.filter(p=>p.added);st(u,o).forEach(p=>{p[0].length===1&&p[1].length===1&&He(p[0][0],p[1][0])<r&&(T.push(p[0][0]),T.push(p[1][0]))})}const E=w.reduce((o,u)=>{const b=u.added?"ins":u.removed?"del":null,p=T.indexOf(u)>-1?' class="d2h-change"':"",y=ee(u.value);return b!==null?`${o}<${b}${p}>${y}</${b}>`:`${o}${y}`},"");return{oldLine:{prefix:c.prefix,content:rt(E)},newLine:{prefix:d.prefix,content:at(E)}}}const Oe="file-summary",ot="icon",ft={colorScheme:ce.colorScheme};class ct{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},ft),n)}render(t){const n=t.map(e=>this.hoganUtils.render(Oe,"line",{fileHtmlId:Te(e),oldName:e.oldName,newName:e.newName,fileName:de(e),deletedLines:"-"+e.deletedLines,addedLines:"+"+e.addedLines},{fileIcon:this.hoganUtils.template(ot,Ne(e))})).join(`
`);return this.hoganUtils.render(Oe,"wrapper",{colorScheme:ye(this.config.colorScheme),filesNumber:t.length,files:n})}}const Be=Object.assign(Object.assign({},ce),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),ie="generic",De="line-by-line",dt="icon",ut="tag";class ht{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},Be),n)}render(t){const n=t.map(e=>{let s;return e.blocks.length?s=this.generateFileHtml(e):s=this.generateEmptyDiff(),this.makeFileDiffHtml(e,s)}).join(`
`);return this.hoganUtils.render(ie,"wrapper",{colorScheme:ye(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";const e=this.hoganUtils.template(De,"file-diff"),s=this.hoganUtils.template(ie,"file-path"),a=this.hoganUtils.template(dt,"file"),r=this.hoganUtils.template(ut,Ne(t));return e.render({file:t,fileHtmlId:Te(t),diffs:n,filePath:s.render({fileDiffName:de(t)},{fileIcon:a,fileTag:r})})}generateEmptyDiff(){return this.hoganUtils.render(ie,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass:W})}generateFileHtml(t){const n=we(ve(e=>G(e.content,t.isCombined).content));return t.blocks.map(e=>{let s=this.hoganUtils.render(ie,"block-header",{CSSLineClass:W,blockHeader:t.isTooBig?e.header:ee(e.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return this.applyLineGroupping(e).forEach(([a,r,f])=>{if(r.length&&f.length&&!a.length)this.applyRematchMatching(r,f,n).map(([c,d])=>{const{left:w,right:T}=this.processChangedLines(t,t.isCombined,c,d);s+=w,s+=T});else if(a.length)a.forEach(c=>{const{prefix:d,content:w}=G(c.content,t.isCombined);s+=this.generateSingleLineHtml(t,{type:W.CONTEXT,prefix:d,content:w,oldNumber:c.oldNumber,newNumber:c.newNumber})});else if(r.length||f.length){const{left:c,right:d}=this.processChangedLines(t,t.isCombined,r,f);s+=c,s+=d}else console.error("Unknown state reached while processing groups of lines",a,r,f)}),s}).join(`
`)}applyLineGroupping(t){const n=[];let e=[],s=[];for(let a=0;a<t.lines.length;a++){const r=t.lines[a];(r.type!==F.INSERT&&s.length||r.type===F.CONTEXT&&e.length>0)&&(n.push([[],e,s]),e=[],s=[]),r.type===F.CONTEXT?n.push([[r],[],[]]):r.type===F.INSERT&&e.length===0?n.push([[],[],[r]]):r.type===F.INSERT&&e.length>0?s.push(r):r.type===F.DELETE&&e.push(r)}return(e.length||s.length)&&(n.push([[],e,s]),e=[],s=[]),n}applyRematchMatching(t,n,e){const s=t.length*n.length,a=Math.max.apply(null,[0].concat(t.concat(n).map(f=>f.content.length)));return s<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}processChangedLines(t,n,e,s){const a={right:"",left:""},r=Math.max(e.length,s.length);for(let f=0;f<r;f++){const c=e[f],d=s[f],w=c!==void 0&&d!==void 0?Ae(c.content,d.content,n,this.config):void 0,T=c!==void 0&&c.oldNumber!==void 0?Object.assign(Object.assign({},w!==void 0?{prefix:w.oldLine.prefix,content:w.oldLine.content,type:W.DELETE_CHANGES}:Object.assign(Object.assign({},G(c.content,n)),{type:oe(c.type)})),{oldNumber:c.oldNumber,newNumber:c.newNumber}):void 0,E=d!==void 0&&d.newNumber!==void 0?Object.assign(Object.assign({},w!==void 0?{prefix:w.newLine.prefix,content:w.newLine.content,type:W.INSERT_CHANGES}:Object.assign(Object.assign({},G(d.content,n)),{type:oe(d.type)})),{oldNumber:d.oldNumber,newNumber:d.newNumber}):void 0,{left:o,right:u}=this.generateLineHtml(t,T,E);a.left+=o,a.right+=u}return a}generateLineHtml(t,n,e){return{left:this.generateSingleLineHtml(t,n),right:this.generateSingleLineHtml(t,e)}}generateSingleLineHtml(t,n){if(n===void 0)return"";const e=this.hoganUtils.render(De,"numbers",{oldNumber:n.oldNumber||"",newNumber:n.newNumber||""});return this.hoganUtils.render(ie,"line",{type:n.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:n.prefix===" "?"&nbsp;":n.prefix,content:n.content,lineNumber:e,line:n,file:t})}}const We=Object.assign(Object.assign({},ce),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),se="generic",pt="side-by-side",bt="icon",gt="tag";class mt{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},We),n)}render(t){const n=t.map(e=>{let s;return e.blocks.length?s=this.generateFileHtml(e):s=this.generateEmptyDiff(),this.makeFileDiffHtml(e,s)}).join(`
`);return this.hoganUtils.render(se,"wrapper",{colorScheme:ye(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";const e=this.hoganUtils.template(pt,"file-diff"),s=this.hoganUtils.template(se,"file-path"),a=this.hoganUtils.template(bt,"file"),r=this.hoganUtils.template(gt,Ne(t));return e.render({file:t,fileHtmlId:Te(t),diffs:n,filePath:s.render({fileDiffName:de(t)},{fileIcon:a,fileTag:r})})}generateEmptyDiff(){return{right:"",left:this.hoganUtils.render(se,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass:W})}}generateFileHtml(t){const n=we(ve(e=>G(e.content,t.isCombined).content));return t.blocks.map(e=>{const s={left:this.makeHeaderHtml(e.header,t),right:this.makeHeaderHtml("")};return this.applyLineGroupping(e).forEach(([a,r,f])=>{if(r.length&&f.length&&!a.length)this.applyRematchMatching(r,f,n).map(([c,d])=>{const{left:w,right:T}=this.processChangedLines(t.isCombined,c,d);s.left+=w,s.right+=T});else if(a.length)a.forEach(c=>{const{prefix:d,content:w}=G(c.content,t.isCombined),{left:T,right:E}=this.generateLineHtml({type:W.CONTEXT,prefix:d,content:w,number:c.oldNumber},{type:W.CONTEXT,prefix:d,content:w,number:c.newNumber});s.left+=T,s.right+=E});else if(r.length||f.length){const{left:c,right:d}=this.processChangedLines(t.isCombined,r,f);s.left+=c,s.right+=d}else console.error("Unknown state reached while processing groups of lines",a,r,f)}),s}).reduce((e,s)=>({left:e.left+s.left,right:e.right+s.right}),{left:"",right:""})}applyLineGroupping(t){const n=[];let e=[],s=[];for(let a=0;a<t.lines.length;a++){const r=t.lines[a];(r.type!==F.INSERT&&s.length||r.type===F.CONTEXT&&e.length>0)&&(n.push([[],e,s]),e=[],s=[]),r.type===F.CONTEXT?n.push([[r],[],[]]):r.type===F.INSERT&&e.length===0?n.push([[],[],[r]]):r.type===F.INSERT&&e.length>0?s.push(r):r.type===F.DELETE&&e.push(r)}return(e.length||s.length)&&(n.push([[],e,s]),e=[],s=[]),n}applyRematchMatching(t,n,e){const s=t.length*n.length,a=Math.max.apply(null,[0].concat(t.concat(n).map(f=>f.content.length)));return s<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}makeHeaderHtml(t,n){return this.hoganUtils.render(se,"block-header",{CSSLineClass:W,blockHeader:n!=null&&n.isTooBig?t:ee(t),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})}processChangedLines(t,n,e){const s={right:"",left:""},a=Math.max(n.length,e.length);for(let r=0;r<a;r++){const f=n[r],c=e[r],d=f!==void 0&&c!==void 0?Ae(f.content,c.content,t,this.config):void 0,w=f!==void 0&&f.oldNumber!==void 0?Object.assign(Object.assign({},d!==void 0?{prefix:d.oldLine.prefix,content:d.oldLine.content,type:W.DELETE_CHANGES}:Object.assign(Object.assign({},G(f.content,t)),{type:oe(f.type)})),{number:f.oldNumber}):void 0,T=c!==void 0&&c.newNumber!==void 0?Object.assign(Object.assign({},d!==void 0?{prefix:d.newLine.prefix,content:d.newLine.content,type:W.INSERT_CHANGES}:Object.assign(Object.assign({},G(c.content,t)),{type:oe(c.type)})),{number:c.newNumber}):void 0,{left:E,right:o}=this.generateLineHtml(w,T);s.left+=E,s.right+=o}return s}generateLineHtml(t,n){return{left:this.generateSingleHtml(t),right:this.generateSingleHtml(n)}}generateSingleHtml(t){const n="d2h-code-side-linenumber",e="d2h-code-side-line";return this.hoganUtils.render(se,"line",{type:(t==null?void 0:t.type)||`${W.CONTEXT} d2h-emptyplaceholder`,lineClass:t!==void 0?n:`${n} d2h-code-side-emptyplaceholder`,contentClass:t!==void 0?e:`${e} d2h-code-side-emptyplaceholder`,prefix:(t==null?void 0:t.prefix)===" "?"&nbsp;":t==null?void 0:t.prefix,content:t==null?void 0:t.content,lineNumber:t==null?void 0:t.number})}}var Re={};(function(i){(function(t){var n=/\S/,e=/\"/g,s=/\n/g,a=/\r/g,r=/\\/g,f=/\u2028/,c=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(h,m){var x=h.length,A=0,z=1,R=2,I=A,X=null,J=null,P="",B=[],K=!1,g=0,L=0,v="{{",$="}}";function te(){P.length>0&&(B.push({tag:"_t",text:new String(P)}),P="")}function ue(){for(var U=!0,k=L;k<B.length;k++)if(U=t.tags[B[k].tag]<t.tags._v||B[k].tag=="_t"&&B[k].text.match(n)===null,!U)return!1;return U}function Y(U,k){if(te(),U&&ue())for(var V=L,Q;V<B.length;V++)B[V].text&&((Q=B[V+1])&&Q.tag==">"&&(Q.indent=B[V].text.toString()),B.splice(V,1));else k||B.push({tag:`
`});K=!1,L=B.length}function ne(U,k){var V="="+$,Q=U.indexOf(V,k),he=w(U.substring(U.indexOf("=",k)+1,Q)).split(" ");return v=he[0],$=he[he.length-1],Q+V.length-1}for(m&&(m=m.split(" "),v=m[0],$=m[1]),g=0;g<x;g++)I==A?T(v,h,g)?(--g,te(),I=z):h.charAt(g)==`
`?Y(K):P+=h.charAt(g):I==z?(g+=v.length-1,J=t.tags[h.charAt(g+1)],X=J?h.charAt(g+1):"_v",X=="="?(g=ne(h,g),I=A):(J&&g++,I=R),K=g):T($,h,g)?(B.push({tag:X,n:w(P),otag:v,ctag:$,i:X=="/"?K-v.length:g+$.length}),P="",g+=$.length-1,I=A,X=="{"&&($=="}}"?g++:d(B[B.length-1]))):P+=h.charAt(g);return Y(K,!0),B};function d(l){l.n.substr(l.n.length-1)==="}"&&(l.n=l.n.substring(0,l.n.length-1))}function w(l){return l.trim?l.trim():l.replace(/^\s*|\s*$/g,"")}function T(l,h,m){if(h.charAt(m)!=l.charAt(0))return!1;for(var x=1,A=l.length;x<A;x++)if(h.charAt(m+x)!=l.charAt(x))return!1;return!0}var E={_t:!0,"\n":!0,$:!0,"/":!0};function o(l,h,m,x){var A=[],z=null,R=null,I=null;for(R=m[m.length-1];l.length>0;){if(I=l.shift(),R&&R.tag=="<"&&!(I.tag in E))throw new Error("Illegal content in < super tag.");if(t.tags[I.tag]<=t.tags.$||u(I,x))m.push(I),I.nodes=o(l,I.tag,m,x);else if(I.tag=="/"){if(m.length===0)throw new Error("Closing tag without opener: /"+I.n);if(z=m.pop(),I.n!=z.n&&!b(I.n,z.n,x))throw new Error("Nesting error: "+z.n+" vs. "+I.n);return z.end=I.i,A}else I.tag==`
`&&(I.last=l.length==0||l[0].tag==`
`);A.push(I)}if(m.length>0)throw new Error("missing closing tag: "+m.pop().n);return A}function u(l,h){for(var m=0,x=h.length;m<x;m++)if(h[m].o==l.n)return l.tag="#",!0}function b(l,h,m){for(var x=0,A=m.length;x<A;x++)if(m[x].c==l&&m[x].o==h)return!0}function p(l){var h=[];for(var m in l)h.push('"'+N(m)+'": function(c,p,t,i) {'+l[m]+"}");return"{ "+h.join(",")+" }"}function y(l){var h=[];for(var m in l.partials)h.push('"'+N(m)+'":{name:"'+N(l.partials[m].name)+'", '+y(l.partials[m])+"}");return"partials: {"+h.join(",")+"}, subs: "+p(l.subs)}t.stringify=function(l,h,m){return"{code: function (c,p,i) { "+t.wrapMain(l.code)+" },"+y(l)+"}"};var S=0;t.generate=function(l,h,m){S=0;var x={code:"",subs:{},partials:{}};return t.walk(l,x),m.asString?this.stringify(x,h,m):this.makeTemplate(x,h,m)},t.wrapMain=function(l){return'var t=this;t.b(i=i||"");'+l+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(l,h,m){var x=this.makePartials(l);return x.code=new Function("c","p","i",this.wrapMain(l.code)),new this.template(x,h,this,m)},t.makePartials=function(l){var h,m={subs:{},partials:l.partials,name:l.name};for(h in m.partials)m.partials[h]=this.makePartials(m.partials[h]);for(h in l.subs)m.subs[h]=new Function("c","p","t","i",l.subs[h]);return m};function N(l){return l.replace(r,"\\\\").replace(e,'\\"').replace(s,"\\n").replace(a,"\\r").replace(f,"\\u2028").replace(c,"\\u2029")}function O(l){return~l.indexOf(".")?"d":"f"}function C(l,h){var m="<"+(h.prefix||""),x=m+l.n+S++;return h.partials[x]={name:l.n,partials:{}},h.code+='t.b(t.rp("'+N(x)+'",c,p,"'+(l.indent||"")+'"));',x}t.codegen={"#":function(l,h){h.code+="if(t.s(t."+O(l.n)+'("'+N(l.n)+'",c,p,1),c,p,0,'+l.i+","+l.end+',"'+l.otag+" "+l.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(l.nodes,h),h.code+="});c.pop();}"},"^":function(l,h){h.code+="if(!t.s(t."+O(l.n)+'("'+N(l.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(l.nodes,h),h.code+="};"},">":C,"<":function(l,h){var m={partials:{},code:"",subs:{},inPartial:!0};t.walk(l.nodes,m);var x=h.partials[C(l,h)];x.subs=m.subs,x.partials=m.partials},$:function(l,h){var m={subs:{},code:"",partials:h.partials,prefix:l.n};t.walk(l.nodes,m),h.subs[l.n]=m.code,h.inPartial||(h.code+='t.sub("'+N(l.n)+'",c,p,i);')},"\n":function(l,h){h.code+=ae('"\\n"'+(l.last?"":" + i"))},_v:function(l,h){h.code+="t.b(t.v(t."+O(l.n)+'("'+N(l.n)+'",c,p,0)));'},_t:function(l,h){h.code+=ae('"'+N(l.text)+'"')},"{":D,"&":D};function D(l,h){h.code+="t.b(t.t(t."+O(l.n)+'("'+N(l.n)+'",c,p,0)));'}function ae(l){return"t.b("+l+");"}t.walk=function(l,h){for(var m,x=0,A=l.length;x<A;x++)m=t.codegen[l[x].tag],m&&m(l[x],h);return h},t.parse=function(l,h,m){return m=m||{},o(l,"",[],m.sectionTags||[])},t.cache={},t.cacheKey=function(l,h){return[l,!!h.asString,!!h.disableLambda,h.delimiters,!!h.modelGet].join("||")},t.compile=function(l,h){h=h||{};var m=t.cacheKey(l,h),x=this.cache[m];if(x){var A=x.partials;for(var z in A)delete A[z].instance;return x}return x=this.generate(this.parse(this.scan(l,h.delimiters),l,h),l,h),this.cache[m]=x}})(i)})(Re);var ze={};(function(i){(function(t){t.Template=function(o,u,b,p){o=o||{},this.r=o.code||this.r,this.c=b,this.options=p||{},this.text=u||"",this.partials=o.partials||{},this.subs=o.subs||{},this.buf=""},t.Template.prototype={r:function(o,u,b){return""},v:T,t:w,render:function(u,b,p){return this.ri([u],b||{},p)},ri:function(o,u,b){return this.r(o,u,b)},ep:function(o,u){var b=this.partials[o],p=u[b.name];if(b.instance&&b.base==p)return b.instance;if(typeof p=="string"){if(!this.c)throw new Error("No compiler available.");p=this.c.compile(p,this.options)}if(!p)return null;if(this.partials[o].base=p,b.subs){u.stackText||(u.stackText={});for(key in b.subs)u.stackText[key]||(u.stackText[key]=this.activeSub!==void 0&&u.stackText[this.activeSub]?u.stackText[this.activeSub]:this.text);p=e(p,b.subs,b.partials,this.stackSubs,this.stackPartials,u.stackText)}return this.partials[o].instance=p,p},rp:function(o,u,b,p){var y=this.ep(o,b);return y?y.ri(u,b,p):""},rs:function(o,u,b){var p=o[o.length-1];if(!E(p)){b(o,u,this);return}for(var y=0;y<p.length;y++)o.push(p[y]),b(o,u,this),o.pop()},s:function(o,u,b,p,y,S,N){var O;return E(o)&&o.length===0?!1:(typeof o=="function"&&(o=this.ms(o,u,b,p,y,S,N)),O=!!o,!p&&O&&u&&u.push(typeof o=="object"?o:u[u.length-1]),O)},d:function(o,u,b,p){var y,S=o.split("."),N=this.f(S[0],u,b,p),O=this.options.modelGet,C=null;if(o==="."&&E(u[u.length-2]))N=u[u.length-1];else for(var D=1;D<S.length;D++)y=n(S[D],N,O),y!==void 0?(C=N,N=y):N="";return p&&!N?!1:(!p&&typeof N=="function"&&(u.push(C),N=this.mv(N,u,b),u.pop()),N)},f:function(o,u,b,p){for(var y=!1,S=null,N=!1,O=this.options.modelGet,C=u.length-1;C>=0;C--)if(S=u[C],y=n(o,S,O),y!==void 0){N=!0;break}return N?(!p&&typeof y=="function"&&(y=this.mv(y,u,b)),y):p?!1:""},ls:function(o,u,b,p,y){var S=this.options.delimiters;return this.options.delimiters=y,this.b(this.ct(w(o.call(u,p)),u,b)),this.options.delimiters=S,!1},ct:function(o,u,b){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(o,this.options).render(u,b)},b:function(o){this.buf+=o},fl:function(){var o=this.buf;return this.buf="",o},ms:function(o,u,b,p,y,S,N){var O,C=u[u.length-1],D=o.call(C);return typeof D=="function"?p?!0:(O=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(D,C,b,O.substring(y,S),N)):D},mv:function(o,u,b){var p=u[u.length-1],y=o.call(p);return typeof y=="function"?this.ct(w(y.call(p)),p,b):y},sub:function(o,u,b,p){var y=this.subs[o];y&&(this.activeSub=o,y(u,b,this,p),this.activeSub=!1)}};function n(o,u,b){var p;return u&&typeof u=="object"&&(u[o]!==void 0?p=u[o]:b&&u.get&&typeof u.get=="function"&&(p=u.get(o))),p}function e(o,u,b,p,y,S){function N(){}N.prototype=o;function O(){}O.prototype=o.subs;var C,D=new N;D.subs=new O,D.subsText={},D.buf="",p=p||{},D.stackSubs=p,D.subsText=S;for(C in u)p[C]||(p[C]=u[C]);for(C in p)D.subs[C]=p[C];y=y||{},D.stackPartials=y;for(C in b)y[C]||(y[C]=b[C]);for(C in y)D.partials[C]=y[C];return D}var s=/&/g,a=/</g,r=/>/g,f=/\'/g,c=/\"/g,d=/[&<>\"\']/;function w(o){return String(o??"")}function T(o){return o=w(o),d.test(o)?o.replace(s,"&amp;").replace(a,"&lt;").replace(r,"&gt;").replace(f,"&#39;").replace(c,"&quot;"):o}var E=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"}})(i)})(ze);var fe=Re;fe.Template=ze.Template;fe.template=fe.Template;var M=fe;const H={};H["file-summary-line"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<li class="d2h-file-list-line">'),e.b(`
`+n),e.b('    <span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",i,t,"      ")),e.b('      <a href="#'),e.b(e.v(e.f("fileHtmlId",i,t,0))),e.b('" class="d2h-file-name">'),e.b(e.v(e.f("fileName",i,t,0))),e.b("</a>"),e.b(`
`+n),e.b('      <span class="d2h-file-stats">'),e.b(`
`+n),e.b('          <span class="d2h-lines-added">'),e.b(e.v(e.f("addedLines",i,t,0))),e.b("</span>"),e.b(`
`+n),e.b('          <span class="d2h-lines-deleted">'),e.b(e.v(e.f("deletedLines",i,t,0))),e.b("</span>"),e.b(`
`+n),e.b("      </span>"),e.b(`
`+n),e.b("    </span>"),e.b(`
`+n),e.b("</li>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});H["file-summary-wrapper"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-file-list-wrapper '),e.b(e.v(e.f("colorScheme",i,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-list-header">'),e.b(`
`+n),e.b('        <span class="d2h-file-list-title">Files changed ('),e.b(e.v(e.f("filesNumber",i,t,0))),e.b(")</span>"),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-show">show</a>'),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <ol class="d2h-file-list">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("files",i,t,0))),e.b(`
`+n),e.b("    </ol>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});H["generic-block-header"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",i,t,0))),e.b(" "),e.b(e.v(e.d("CSSLineClass.INFO",i,t,0))),e.b('"></td>'),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",i,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",i,t,0))),e.b('">'),e.s(e.f("blockHeader",i,t,1),i,t,0,156,173,"{{ }}")&&(e.rs(i,t,function(s,a,r){r.b(r.t(r.f("blockHeader",s,a,0)))}),i.pop()),e.s(e.f("blockHeader",i,t,1),i,t,1,0,0,"")||e.b("&nbsp;"),e.b("</div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});H["generic-empty-diff"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",i,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",i,t,0))),e.b('">'),e.b(`
`+n),e.b("            File without changes"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});H["generic-file-path"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",i,t,"    ")),e.b('    <span class="d2h-file-name">'),e.b(e.v(e.f("fileDiffName",i,t,0))),e.b("</span>"),e.b(`
`+n),e.b(e.rp("<fileTag1",i,t,"    ")),e.b("</span>"),e.b(`
`+n),e.b('<label class="d2h-file-collapse">'),e.b(`
`+n),e.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),e.b(`
`+n),e.b("    Viewed"),e.b(`
`+n),e.b("</label>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});H["generic-line"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",i,t,0))),e.b(" "),e.b(e.v(e.f("type",i,t,0))),e.b('">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("lineNumber",i,t,0))),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("type",i,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",i,t,0))),e.b('">'),e.b(`
`+n),e.s(e.f("prefix",i,t,1),i,t,0,162,238,"{{ }}")&&(e.rs(i,t,function(s,a,r){r.b('            <span class="d2h-code-line-prefix">'),r.b(r.t(r.f("prefix",s,a,0))),r.b("</span>"),r.b(`
`+n)}),i.pop()),e.s(e.f("prefix",i,t,1),i,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),e.b(`
`+n)),e.s(e.f("content",i,t,1),i,t,0,371,445,"{{ }}")&&(e.rs(i,t,function(s,a,r){r.b('            <span class="d2h-code-line-ctn">'),r.b(r.t(r.f("content",s,a,0))),r.b("</span>"),r.b(`
`+n)}),i.pop()),e.s(e.f("content",i,t,1),i,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-ctn"><br></span>'),e.b(`
`+n)),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});H["generic-wrapper"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-wrapper '),e.b(e.v(e.f("colorScheme",i,t,0))),e.b('">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("content",i,t,0))),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});H["icon-file-added"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),e.b(`
`+n),e.b('     width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});H["icon-file-changed"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});H["icon-file-deleted"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});H["icon-file-renamed"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});H["icon-file"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),e.b(`
`+n),e.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});H["line-by-line-file-diff"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",i,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",i,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("filePath",i,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-file-diff">'),e.b(`
`+n),e.b('        <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('            <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                "),e.b(e.t(e.f("diffs",i,t,0))),e.b(`
`+n),e.b("                </tbody>"),e.b(`
`+n),e.b("            </table>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});H["line-by-line-numbers"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<div class="line-num1">'),e.b(e.v(e.f("oldNumber",i,t,0))),e.b("</div>"),e.b(`
`+n),e.b('<div class="line-num2">'),e.b(e.v(e.f("newNumber",i,t,0))),e.b("</div>"),e.fl()},partials:{},subs:{}});H["side-by-side-file-diff"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",i,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",i,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("filePath",i,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-files-diff">'),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.left",i,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.right",i,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});H["tag-file-added"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),e.fl()},partials:{},subs:{}});H["tag-file-changed"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),e.fl()},partials:{},subs:{}});H["tag-file-deleted"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),e.fl()},partials:{},subs:{}});H["tag-file-renamed"]=new M.Template({code:function(i,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),e.fl()},partials:{},subs:{}});class vt{constructor({compiledTemplates:t={},rawTemplates:n={}}){const e=Object.entries(n).reduce((s,[a,r])=>{const f=M.compile(r,{asString:!1});return Object.assign(Object.assign({},s),{[a]:f})},{});this.preCompiledTemplates=Object.assign(Object.assign(Object.assign({},H),t),e)}static compile(t){return M.compile(t,{asString:!1})}render(t,n,e,s,a){const r=this.templateKey(t,n);try{return this.preCompiledTemplates[r].render(e,s,a)}catch{throw new Error(`Could not find template to render '${r}'`)}}template(t,n){return this.preCompiledTemplates[this.templateKey(t,n)]}templateKey(t,n){return`${t}-${n}`}}const Pe=Object.assign(Object.assign(Object.assign({},Be),We),{outputFormat:$e.LINE_BY_LINE,drawFileList:!0});function wt(i,t={}){return Me(i,Object.assign(Object.assign({},Pe),t))}function yt(i,t={}){const n=Object.assign(Object.assign({},Pe),t),e=typeof i=="string"?Me(i,n):i,s=new vt(n),{colorScheme:a}=n,r={colorScheme:a},f=n.drawFileList?new ct(s,r).render(e):"",c=n.outputFormat==="side-by-side"?new mt(s,n).render(e):new ht(s,n).render(e);return f+c}export{yt as h,wt as p};
