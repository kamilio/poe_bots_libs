import{r as d,a as re,R as A,m as Ie}from"./assets/vendor-891a2f54.js";import{h as Re,p as xe}from"./assets/diff2html-520d79da.js";import{H as ce}from"./assets/hljs-c6694249.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}})();var ge={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le=d,Be=Symbol.for("react.element"),Fe=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Ee=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function je(e,o,s){var r,n={},c=null,a=null;s!==void 0&&(c=""+s),o.key!==void 0&&(c=""+o.key),o.ref!==void 0&&(a=o.ref);for(r in o)De.call(o,r)&&!Oe.hasOwnProperty(r)&&(n[r]=o[r]);if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:Be,type:e,key:c,ref:a,props:n,_owner:Ee.current}}Q.Fragment=Fe;Q.jsx=je;Q.jsxs=je;ge.exports=Q;var t=ge.exports,ae={},fe=re;ae.createRoot=fe.createRoot,ae.hydrateRoot=fe.hydrateRoot;const Ae="_container_1kx9n_2",Me="_uploadZone_1kx9n_10",he={container:Ae,uploadZone:Me},Pe=({onFilesDrop:e,children:o})=>{const s=a=>{a.preventDefault(),a.currentTarget.style.borderColor="#0969da"},r=a=>{a.currentTarget.style.borderColor="#30363d"},n=a=>{a.preventDefault(),a.currentTarget.style.borderColor="#30363d",e(a.dataTransfer.files)},c=a=>{e(a.target.files),a.target.value=""};return t.jsxs("div",{className:he.container,children:[t.jsxs("div",{className:he.uploadZone,onDragOver:s,onDragLeave:r,onDrop:n,onClick:()=>document.getElementById("fileInput").click(),children:[t.jsx("p",{children:"Drag and drop your source code files here or click to select"}),t.jsx("input",{type:"file",id:"fileInput",style:{display:"none"},multiple:!0,onChange:c})]}),o]})},Te="_button_nc3y6_2",He="_small_nc3y6_15",qe="_medium_nc3y6_22",Ue="_large_nc3y6_29",We="_primary_nc3y6_47",Ge="_success_nc3y6_56",ze="_danger_nc3y6_65",Je="_ghost_nc3y6_75",oe={button:Te,small:He,medium:qe,large:Ue,default:"_default_nc3y6_37",primary:We,success:Ge,danger:ze,ghost:Je},q=({variant:e="default",size:o="medium",disabled:s=!1,type:r="button",onClick:n,children:c,className:a,...l})=>{const _=[oe.button,oe[e],oe[o],a].filter(Boolean).join(" ");return t.jsx("button",{type:r,className:_,onClick:n,disabled:s,...l,children:c})},Ke="_buttonWrapper_17g1b_1",Ze={buttonWrapper:Ke};function X(e,o,{openChat:s=!1,stream:r=!0,transformCompleteResponse:n=c=>c}={}){const[c,a]=d.useState(o),[l,_]=d.useState(o),[C,f]=d.useState(!1),[x,y]=d.useState(null),[i,m]=d.useState(!1);d.useEffect(()=>{if(!window.Poe){console.info("Poe not found in window object");return}return window.Poe.registerHandler(e,u=>{const p=u.responses[0];p.status==="error"?(y(p.statusText),a(o),f(!0),m(!1)):p.status==="incomplete"?(m(!0),_(p.content)):p.status==="complete"&&(m(!1),a(n(p.content)),_(p.content))})},[]);const h=d.useCallback(async u=>{if(u!=null&&u.trim()){m(!0),f(!1),y(null);try{if(console.log(u),!window.Poe){console.info("Poe not found in window object");return}await window.Poe.sendUserMessage(u,{handler:e,stream:r,openChat:s})}catch(p){console.log(p),f(!0),y(p)}}},[e,s,r]);return{sendMessage:h,sendUserMessage:h,response:c,setResponse:a,isError:C,error:x,isLoading:i,streamingResult:l}}const ee=(e,o,s,{isCanvas:r=!1}={})=>{const n=`@${e} ${o}`,c=JSON.stringify({...s,format:r?"json":"code"});return`${n}
~~~
${c}`},z=e=>{console.log(e);const o=e.replace(/\n\n---\n\n\[Logs\]\([^\)]+\)/g,"");return console.log(o),JSON.parse(o)},te=e=>d.useMemo(()=>{try{const s=JSON.parse(e);if(s.status)return s.status}catch{}},[e]),ve=d.createContext(),T="~~~",we=(e,o)=>{if(!e)return[];let s=Object.entries(e).map(([r,n])=>{const[c,a]=r.split(T);return{fileName:c,lineInfo:a,comments:n}});return o!=null&&o.content&&(s=[...s,{fileName:"global",lineInfo:"global",comments:[o]}]),s=s.filter(({comments:r})=>r.length),s},Ve=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),_e=e=>{if(Ve(e))return e;const o={};return console.log(e),e.forEach(s=>{if(s.fileName==="global"&&s.lineInfo==="global")return;const r=s.comments.map(c=>({id:c.id,author:c.author,content:c.content||c.Bot})),n=`${s.fileName}${T}${s.lineInfo}`;o[n]=r}),o},Ye=({comments:e,setComments:o,globalComment:s,setGlobalComment:r,children:n})=>{const c=(i,m,h)=>{const u=`${i}${T}${m}`,p={id:Date.now(),content:h,author:"User"};o(w=>({...w,[u]:[...w[u]||[],p]}))},a=i=>{const m={id:Date.now(),content:i,author:"User"};r(m)},l=()=>(s==null?void 0:s.content)||"",_=(i,m,h,u)=>{const p=`${i}${T}${m}`;o(w=>({...w,[p]:w[p].map((j,M)=>M===h?{...j,content:u}:j)}))},C=(i,m,h)=>{const u=`${i}${T}${m}`;o(p=>({...p,[u]:p[u].filter((w,j)=>j!==h)}))},f=(i,m)=>{const h=`${i}-${m}`;return e[h]||[]},x=d.useCallback(()=>we(e,s),[e,s]),y=d.useCallback(i=>e?Object.entries(e).filter(([h])=>h.startsWith(`${i}${T}`)).map(([h,u])=>({lineInfo:h.split(T)[1],comments:u})):[],[e]);return t.jsx(ve.Provider,{value:{addComment:c,deleteComment:C,updateComment:_,getComments:f,getAllComments:x,addGlobalComment:a,getGlobalComment:l,getAllCommentsForFile:y},children:n})},ie=()=>d.useContext(ve),be=d.createContext(null);function Qe({children:e,initialFiles:o,initialComments:s,initialDiff:r,config:n}){const[c,a]=d.useState({}),[l,_]=d.useState(_e(s)),[C,f]=d.useState();console.log(l);const[x,y]=d.useState(n),i=d.useMemo(()=>we(l,C),[l,C]),{response:m,isLoading:h,sendMessage:u,streamingResult:p,setResponse:w}=X("store",{isInitial:!0,files:o,comments:null,diff:r,description:x.description},{transformCompleteResponse:z}),j=te(p),M=!!Object.keys(c).length,$=d.useMemo(()=>!!i.length,[i]),J=d.useCallback(()=>{if(!M&&!$)return;const b=ee(x.botName,"/update",{files:c,comments:i},{isCanvas:x.isCanvas});u(b,{transformCompleteResponse:z})},[c,i,M,$,C,l]),W=M||$;d.useEffect(()=>{m.isInitial||(Array.isArray(m.comments)?_(_e(m.comments)):_(m.comments||{}),f(""),a({}),y({...x,shouldShowUpload:!1,isInitialPage:!1}))},[m]);const F={config:x,uploadedFiles:c,setUploadedFiles:a,sendSubmitMessage:J,canSubmitMessage:W,files:m.files,isLoading:h,diff:m.diff,description:m.description,statusText:j,setResponse:w};return t.jsx(be.Provider,{value:F,children:t.jsx(Ye,{setComments:_,setGlobalComment:f,globalComment:C,comments:l,children:e})})}function U(){return d.useContext(be)}JSON.parse(document.getElementById("config-json-data").textContent);const Ce=({uploadedFiles:e,onSubmit:o,children:s,...r})=>{const{sendSubmitMessage:n,canSubmitMessage:c}=U();return t.jsx("div",{className:Ze.buttonWrapper,children:t.jsx(q,{onClick:n,disabled:!c,variant:"success",...r,children:s})})};const Xe="_diffContainer_vza99_1",et="_fileContent_vza99_3",tt="_addCommentButton_vza99_23",nt="_commentRow_vza99_46",ot="_commentCell_vza99_50",R={diffContainer:Xe,fileContent:et,"d2h-code-side-emptyplaceholder":"_d2h-code-side-emptyplaceholder_vza99_13","d2h-info":"_d2h-info_vza99_13",addCommentButton:tt,commentRow:nt,commentCell:ot},st="_container_1jkch_2",rt="_header_1jkch_14",ct="_buttonGroup_1jkch_25",at="_content_1jkch_31",it="_noHeader_1jkch_36",G={container:st,header:rt,buttonGroup:ct,content:at,noHeader:it},ne=({header:e,buttons:o,children:s})=>t.jsxs("div",{className:G.container,children:[e&&t.jsxs("div",{className:G.header,children:[e,t.jsx("div",{className:G.buttonGroup,children:o})]}),t.jsx("div",{className:`${G.content} ${e?"":G.noHeader}`,children:s})]}),le=({content:e,onCopySuccess:o,onCopyError:s,defaultLabel:r="Copy",successLabel:n="Copied!",children:c=r,...a})=>{const[l,_]=d.useState(!1),C=async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const f=document.createElement("textarea");f.value=e,f.style.top="0",f.style.left="0",f.style.position="fixed",f.style.opacity="0",document.body.appendChild(f),f.focus(),f.select(),document.execCommand("copy"),document.body.removeChild(f)}_(!0),o==null||o(),setTimeout(()=>_(!1),2e3)}catch(f){s==null||s(f)}};return t.jsx(q,{onClick:C,...a,children:l?n:c})},lt="_commentSection_1e3aj_1",mt="_stickyComment_1e3aj_13",dt="_commentSectionHeader_1e3aj_23",ut="_comment_1e3aj_1",pt="_commentList_1e3aj_40",ft="_commentWrapper_1e3aj_46",ht="_deleteComment_1e3aj_51",_t="_formHeader_1e3aj_69",Ct="_commentContent_1e3aj_74",yt="_commentHeader_1e3aj_78",xt="_commentAuthor_1e3aj_88",gt="_commentBody_1e3aj_94",jt="_commentForm_1e3aj_103",vt="_commentInput_1e3aj_112",wt="_formFooter_1e3aj_123",bt="_submitComment_1e3aj_127",Nt="_closeButton_1e3aj_139",I={commentSection:lt,stickyComment:mt,commentSectionHeader:dt,comment:ut,commentList:pt,commentWrapper:ft,deleteComment:ht,formHeader:_t,commentContent:Ct,commentHeader:yt,commentAuthor:xt,commentBody:gt,commentForm:jt,commentInput:vt,formFooter:wt,submitComment:bt,closeButton:Nt},St=({content:e,author:o,onDelete:s})=>t.jsx("div",{className:I.comment,children:t.jsx("div",{className:I.commentWrapper,children:t.jsxs("div",{className:I.commentContent,children:[t.jsxs("div",{className:I.commentHeader,children:[t.jsx("span",{className:I.commentAuthor,children:o}),t.jsx("button",{className:I.deleteComment,onClick:s,children:"Ã—"})]}),t.jsx("div",{className:I.commentBody,children:e})]})})}),$t=({onSubmit:e})=>{const[o,s]=d.useState(""),r=n=>{n.preventDefault(),o.trim()&&(e(o),s(""))};return t.jsxs("form",{className:I.commentForm,onSubmit:r,children:[t.jsx("textarea",{value:o,onChange:n=>s(n.target.value),placeholder:"Add a comment...",className:I.commentInput}),t.jsx("div",{className:I.formFooter,children:t.jsx("button",{onClick:r,className:I.submitComment,children:"Comment"})})]})},Ne=({lineNumber:e,comments:o,onAddComment:s,onDeleteComment:r,onClose:n})=>t.jsx($t,{onSubmit:s}),Se=({comments:e,onDeleteComment:o})=>e.length?t.jsx("div",{className:I.commentList,children:e.map((s,r)=>t.jsx(St,{...s,onDelete:()=>o(r)},r))}):null,$e=({content:e,filename:o,children:s="Deploy",...r})=>{const{uploadedFiles:n,config:c,files:a}=U(),{sendMessage:l,isLoading:_,response:C,streamingResult:f,setResponse:x}=X(`deploy-${o}`,"",{transformCompleteResponse:z}),y=te(f);return A.useEffect(()=>{x("")},[a]),c.deploySupportedFileExtensions.includes(o.split(".").pop())?C.url?t.jsx(le,{content:C.url,...r,children:"Deployed. Click to Copy!"}):t.jsx(q,{onClick:()=>l(ee(c.botName,"/deploy",{filename:o,files:n},{isCanvas:c.isCanvas})),...r,children:_?y||"Deploying":"Deploy"}):null},kt={drawFileList:!1,matching:"lines",outputFormat:"line-by-line",highlight:!1,colorScheme:"dark",renderNothingWhenEmpty:!0,rawTemplates:{"generic-wrapper":'<div class="d2h-auto-color-scheme">{{{content}}}</div>',"line-by-line-file-diff":`
            <div id="{{fileHtmlId}}" data-lang="{{file.language}}">
                <div class="d2h-file-list-wrapper">
                    <div class="d2h-file-list-header">
                        <span class="d2h-file-name-wrapper">
                            <span class="d2h-file-name">{{file.fileName}}</span>
                        </span>
                    </div>
                </div>
                <div class="d2h-file-diff">
                    <div class="d2h-code-wrapper">
                        <table class="d2h-diff-table">
                            <tbody class="d2h-diff-tbody">
                                {{{diffs}}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>`}},It=A.memo(({file:e,fileContent:o,commentsEnabled:s=!0})=>{const r=A.useRef(null),[n,c]=d.useState(null),a=A.useRef(null),[l,_]=d.useState([]),{addComment:C,deleteComment:f,getComments:x,getAllCommentsForFile:y}=ie(),i=d.useMemo(()=>({__html:Re([e],kt)}),[e]),m=d.useCallback(()=>{if(!r.current)return;(()=>{r.current.querySelectorAll(`.${R.commentRow}`).forEach(v=>{v!==a.current&&v.remove()})})();const W=y(e.newName).reduce((g,{lineInfo:v,comments:D})=>(g[v]=D,g),{}),F=[],b={};r.current.querySelectorAll(".d2h-code-linenumber").forEach(g=>{var E,k,N,O,S,P;const v=(N=(k=(E=g.querySelector(".line-num1"))==null?void 0:E.textContent)==null?void 0:k.trim)==null?void 0:N.call(k),H=((P=(S=(O=g.querySelector(".line-num2"))==null?void 0:O.textContent)==null?void 0:S.trim)==null?void 0:P.call(S))||v;b[H]||(b[H]=[]),b[H].push(g)}),Object.entries(b).forEach(([g,v])=>{const D=W[g];if(!(D!=null&&D.length))return;const E=(v[1]?v[1]:v[0]).closest("tr");if(!E)return;const k=E.closest("tbody");if(!k)return;const N=document.createElement("tr");N.className=`${R.commentRow}`,N.setAttribute("data-line",g);const O=document.createElement("div");O.className="portal-container";const S=document.createElement("td");S.className=`${R.commentCell}`,S.colSpan=3,S.appendChild(O),N.appendChild(S),E.nextSibling?k.insertBefore(N,E.nextSibling):k.appendChild(N),F.push(t.jsx(A.Fragment,{children:re.createPortal(t.jsx(Se,{comments:D,onDeleteComment:P=>f(e.newName,g,P)}),O)},`${e.newName}-${g}`))}),_(F)},[e.newName,y,f]);A.useEffect(()=>{setTimeout(async()=>{var $;if(r.current){const J=r.current.querySelectorAll(".d2h-code-linenumber"),W=(($=e.newName)==null?void 0:$.split(".").pop())||"";J.forEach(b=>{const g=b.closest("tr");if(!g.classList.contains("d2h-del")&&s){const v=document.createElement("button");v.className=R.addCommentButton,v.innerHTML="+",g.appendChild(v),g.addEventListener("mouseenter",()=>{v.style.opacity="1"}),g.addEventListener("mouseleave",()=>{v.style.opacity="0"}),v.addEventListener("click",D=>{var P,K,me,de,Z,ue;const H=(me=(K=(P=b.querySelector(".line-num1"))==null?void 0:P.textContent)==null?void 0:K.trim)==null?void 0:me.call(K),k=((ue=(Z=(de=b.querySelector(".line-num2"))==null?void 0:de.textContent)==null?void 0:Z.trim)==null?void 0:ue.call(Z))||H;if(n===k)return;a.current&&(a.current.remove(),a.current=null),c(k);const N=document.createElement("tr");N.className=R.commentRow,N.innerHTML=`<td colspan="3" class="${R.commentCell}"></td>`;const O=`.${R.commentRow}[data-line="${k}"]`,S=Array.from(r.current.querySelectorAll(O));if(S.length>0){const pe=S[S.length-1];pe.parentNode.insertBefore(N,pe.nextSibling)}else g.parentNode.insertBefore(N,g.nextSibling);a.current=N})}});const F=r.current.querySelectorAll(".d2h-code-line-ctn");F==null||F.forEach(b=>{b.dataset.highlighted||(ce.configure({ignoreUnescapedHTML:!0}),b.classList.add(`language-${W}`),ce.highlightElement(b))})}},0)},[i,e.newName,s,n]),A.useEffect(()=>{m()},[m]);const h=$=>{n&&(C(e.newName,n,$),m())},u=$=>{f(e.newName,n,$),m()},p=()=>{a.current&&(a.current.remove(),a.current=null),c(null)},w=e.isNew?e.newName:e.oldName,j=e.isRename?`${e.oldName} -> ${e.newName}`:w,M=t.jsxs(t.Fragment,{children:[t.jsx($e,{size:"small",filename:e.newName}),t.jsx(le,{size:"small",content:o})]});return t.jsx(ne,{header:j,buttons:M,children:t.jsxs("div",{className:R.diffContainer,children:[t.jsx("div",{className:R.fileContent,ref:r,dangerouslySetInnerHTML:i}),l,s&&n&&a.current&&re.createPortal(t.jsx(Ne,{lineNumber:n,comments:x(e.newName,n),onAddComment:h,onDeleteComment:u,onClose:p}),a.current.querySelector(`.${R.commentCell}`))]})})}),Rt=({diff:e,files:o,commentsEnabled:s=!0})=>e?d.useMemo(()=>xe(e),[e]).map(n=>t.jsx(It,{file:n,fileContent:o[n.newName],commentsEnabled:s},n.newName)):null;const Lt="_container_1mk1f_1",Bt="_codeWrapper_1mk1f_7",Ft="_inlineCommentSection_1mk1f_16",Dt="_codeLine_1mk1f_21",Et="_lineNumber_1mk1f_35",Ot="_hoverable_1mk1f_48",At="_lineContent_1mk1f_57",Mt="_addCommentButton_1mk1f_61",B={container:Lt,codeWrapper:Bt,inlineCommentSection:Ft,codeLine:Dt,lineNumber:Et,hoverable:Ot,lineContent:At,addCommentButton:Mt},Pt=e=>{const o=e.split(".").pop().toLowerCase();return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",rb:"ruby",java:"java",cpp:"cpp",c:"c",cs:"csharp",html:"html",css:"css",scss:"scss",sass:"scss",php:"php",go:"go",rs:"rust",swift:"swift",kt:"kotlin",md:"markdown",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",sql:"sql",sh:"bash",bash:"bash",dockerfile:"dockerfile"}[o]||"plaintext"},Tt=({lineNumber:e,content:o,commentsEnabled:s,onLineSelect:r,language:n,selectedLine:c,existingComments:a,onAddComment:l,onDeleteComment:_,onClose:C})=>{const[f,x]=d.useState(!1),y=d.useRef(null);return d.useEffect(()=>{!y.current||y.current.dataset.highlighted==="yes"||ce.highlightElement(y.current)},[o]),t.jsxs("div",{className:B.lineContainer,children:[t.jsxs("div",{className:B.codeLine,"data-line":e,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>r(e),children:[t.jsx("span",{className:`${B.lineNumber}${s?" "+B.hoverable:""}`,children:String(e).padStart(3)}),t.jsx("span",{ref:y,className:`${B.lineContent} language-${n}`,children:o}),s&&t.jsx("button",{className:B.addCommentButton,style:{opacity:f?1:0},onClick:i=>{i.stopPropagation(),r(e)},children:"+"})]}),a&&a.length>0&&t.jsx("div",{className:B.existingComments,children:t.jsx(Se,{comments:a,onDeleteComment:i=>_(i)})}),c===e&&s&&t.jsx(Ne,{lineNumber:e,comments:a||[],onAddComment:l,onDeleteComment:_,onClose:C})]})},ye=({filename:e,content:o,commentsEnabled:s=!0})=>{const[r,n]=d.useState(null),{addComment:c,deleteComment:a,getAllCommentsForFile:l}=ie(),_=Pt(e),C=o.split(`
`),f=t.jsxs(t.Fragment,{children:[t.jsx($e,{size:"small",filename:e}),t.jsx(le,{size:"small",content:o})]}),y=l(e).reduce((h,{lineInfo:u,comments:p})=>(h[u]=p,h),{}),i=(h,u)=>{c(e,h,u)},m=(h,u)=>{a(e,h,u)};return t.jsx(ne,{header:e,buttons:f,children:t.jsx("div",{className:B.container,children:t.jsx("pre",{className:B.codeWrapper,children:t.jsx("code",{className:`language-${_}`,children:C.map((h,u)=>{const p=u+1,w=y[p]||[];return t.jsx(Tt,{lineNumber:p,content:h,commentsEnabled:s,onLineSelect:n,language:_,selectedLine:r,existingComments:w,onAddComment:j=>i(p,j),onDeleteComment:j=>m(p,j),onClose:()=>n(null)},p)})})})})})},Ht="_container_7qw4f_2",qt={container:Ht},Ut="_diffDescription_guii0_2",Wt={diffDescription:Ut},ke=({markdown:e=""})=>t.jsx("div",{className:"markdown-container prose prose-sm sm:prose lg:prose-lg max-w-none",dangerouslySetInnerHTML:{__html:Ie(e)}}),Gt=({description:e})=>e?t.jsx(ne,{children:t.jsx("div",{className:Wt.diffDescription,children:t.jsx(ke,{markdown:e})})}):null;function zt(e){return e?xe(e).map(o=>o.newName):[]}const Jt="_container_r5p9y_1",Kt="_commentForm_r5p9y_7",Zt="_commentInput_r5p9y_11",se={container:Jt,commentForm:Kt,commentInput:Zt},Vt=({children:e})=>{const{addGlobalComment:o,getGlobalComment:s}=ie(),r=s(),n=c=>{const a=c.target.value;o(a)};return t.jsx(ne,{header:"Comment",children:t.jsxs("div",{className:se.container,children:[t.jsx("div",{className:se.commentForm,children:t.jsx("textarea",{value:r,onChange:n,placeholder:"What would you like to do?",className:se.commentInput})}),e]})})},Yt="_overlay_yjpva_1",Qt="_content_yjpva_15",Xt="_spinner_yjpva_31",en="_spin_yjpva_31",V={overlay:Yt,content:Qt,spinner:Xt,spin:en};function tn({text:e="Loading...",isVisible:o=!0}){return o?t.jsx("div",{className:V.overlay,children:t.jsxs("div",{className:V.content,children:[t.jsx("div",{className:V.spinner}),t.jsx("div",{className:V.text,children:t.jsx(ke,{markdown:e})})]})}):null}const nn="_container_dn3w7_1",on="_actions_dn3w7_8",sn="_menuIcon_dn3w7_16",rn="_menuIconOpen_dn3w7_22",cn="_menuButton_dn3w7_27",an="_dropdown_dn3w7_49",ln="_slideIn_dn3w7_1",mn="_dropdownContainer_dn3w7_53",dn="_dropdownInner_dn3w7_65",un="_dropdownItem_dn3w7_69",L={container:nn,actions:on,menuIcon:sn,menuIconOpen:rn,menuButton:cn,dropdown:an,slideIn:ln,dropdownContainer:mn,dropdownInner:dn,dropdownItem:un},pn="_buttonGroup_1l8fr_2",fn="_copyButton_1l8fr_8",Y={buttonGroup:pn,copyButton:fn},hn=({shareUrl:e})=>{if(!e)return null;const o=async(r,n,c,a)=>{if(!(!n||!r))try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(r);else{const l=document.createElement("textarea");l.value=r,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy")}finally{l.remove()}}n.textContent=a,setTimeout(()=>{n.textContent=c},2e3)}catch(l){console.error("Failed to copy:",l),n.textContent="Copy failed",setTimeout(()=>{n.textContent=c},2e3)}},s=r=>{r&&(r.preventDefault(),r.stopPropagation());const n=document.querySelector(`.${Y.shareButton}`);if(!n){console.error("Share button not found");return}o(e,n,"Share","Link copied!")};return t.jsx("div",{className:Y.buttonGroup,children:t.jsx("button",{className:`${Y.copyButton} ${Y.shareButton}`,onClick:s,children:"Share"})})},_n=({afterApply:e,...o})=>{const{sendMessage:s,isLoading:r,response:n,streamingResult:c}=X("apply_diff_llm","",{transformCompleteResponse:z}),{setResponse:a,config:l,diff:_}=U(),C=te(c);return d.useEffect(()=>{n&&(a(n),e==null||e())},[n]),_?t.jsx(q,{onClick:()=>s(ee(l.botName,"/apply_diff_llm",{},{isCanvas:l.isCanvas})),...o,children:r?C||"Applying diff":"Looks weird? Apply diff using LLM."}):null},Cn=({afterApply:e,...o})=>{const{sendMessage:s,isLoading:r,response:n,streamingResult:c}=X("review","",{transformCompleteResponse:z}),{setResponse:a,config:l,uploadedFiles:_}=U(),C=te(c);return d.useEffect(()=>{n&&(console.log(n),a(n),e==null||e())},[n]),t.jsx(q,{onClick:()=>s(ee(l.botName,"/review",{files:_},{isCanvas:l.isCanvas})),...o,children:r?C||"Reviewing the code...":"Code review"})},yn=({shareUrl:e})=>{const[o,s]=d.useState(!1),r=d.useRef(null),{config:n}=U();d.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&s(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const c=()=>{s(!1)};return t.jsx("div",{className:L.container,children:t.jsxs("div",{className:L.actions,children:[t.jsx(hn,{shareUrl:e||`https://poe.com/${n.botName}`}),t.jsxs("div",{className:"relative inline-block",ref:r,children:[t.jsx(q,{variant:"ghost",size:"small",className:L.menuButton,onClick:()=>s(!o),"aria-expanded":o,children:t.jsxs("svg",{className:`${L.menuIcon} ${o?L.menuIconOpen:""}`,width:"16",height:"16",viewBox:"0 0 16 16",children:[t.jsx("circle",{cx:"8",cy:"4",r:"1.5"}),t.jsx("circle",{cx:"8",cy:"8",r:"1.5"}),t.jsx("circle",{cx:"8",cy:"12",r:"1.5"})]})}),o&&t.jsx("div",{className:`${L.dropdownContainer} ${L.dropdown}`,children:t.jsxs("div",{className:L.dropdownInner,children:[t.jsx(_n,{className:L.dropdownItem,afterApply:c}),t.jsx(Cn,{className:L.dropdownItem,afterApply:c})]})})]})]})})},xn=()=>{const{uploadedFiles:e,setUploadedFiles:o,files:s,diff:r,config:n,description:c,isLoading:a,statusText:l}=U(),_=zt(r),C=Object.keys(s).reduce((i,m)=>(_.includes(m)||(i[m]=s[m]),i),{}),f=async i=>{try{const m=u=>new Promise((p,w)=>{const j=new FileReader;j.onload=()=>p(j.result),j.onerror=w,j.readAsText(u)}),h=await Promise.all(Array.from(i).map(async u=>[u.name,await m(u)]));o(u=>({...u,...Object.fromEntries(h)}))}catch(m){console.error("Error reading files:",m)}},x=i=>{o(m=>{const h={...m};return delete h[i],h})},y=`# ðŸš€ ${n.botName}
ðŸ¤¯ Tired of AI bots playing hide-and-seek with your code?
Finally! A way to get AI code assistant without the endless "..." or "code continues here" nonsense. Just upload, ask, and get the job done. Simple as that! âš¡ï¸
`;return t.jsxs("div",{className:qt.container,children:[n.isInitialPage||t.jsx(yn,{shareUrl:n.shareUrl}),t.jsx(tn,{isVisible:a,text:l}),t.jsx(Gt,{description:n.isInitialPage?y:c}),n.shouldShowUpload&&t.jsx(Pe,{onFilesDrop:f,children:t.jsx(Ce,{uploadedFiles:e,size:"large",children:"Send message"})}),t.jsx(Rt,{diff:r,files:s,commentsEnabled:n.shouldShowComments}),Object.keys(C).map(i=>t.jsx(ye,{filename:i,content:C[i],commentsEnabled:n.shouldShowComments},i)),Object.keys(e).map(i=>t.jsx(ye,{filename:i,content:e[i],onRemove:()=>x(i),commentsEnabled:n.shouldShowComments},i)),n.shouldShowComments&&t.jsx(Vt,{children:t.jsx(Ce,{uploadedFiles:e,size:"large",children:"Send message"})})]})},gn=JSON.parse(document.getElementById("config-json-data").textContent),jn=JSON.parse(document.getElementById("files-json-data").textContent),vn=JSON.parse(document.getElementById("diff-json-data").textContent),wn=JSON.parse(document.getElementById("comments-json-data").textContent);ae.createRoot(document.getElementById("root")).render(t.jsx(A.StrictMode,{children:t.jsx(Qe,{initialFiles:jn,initialComments:wn,initialDiff:vn,config:gn,children:t.jsx(xn,{})})}));
